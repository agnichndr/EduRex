<div class="alert alert-danger alert-dismissible fade-in" [hidden] = " error ? false : true">
  <button type="button" class="close" data-dismiss="alert" (click) = "dismissErrorAlert()">&times;</button>
  <strong>Error!</strong> {{error}}
</div>
<mat-divider></mat-divider>
<div class="alert alert-success alert-dismissible fade-in" [hidden] = " message ? false : true">
      <button type="button" class="close" data-dismiss="alert" (click) = "dismissMessageAlert()">&times;</button>
      <strong>Success!</strong> {{message}}
    </div>

<mat-card class="login">
    <mat-card-header class="login-hdr">
        <mat-card-title>
            <h2>Create Group</h2>
        </mat-card-title>
        <mat-card-subtitle>
            Field marked * are required.
        </mat-card-subtitle>
    </mat-card-header>
    <mat-card-content class="login-form">
        <form #addGroupForm = "ngForm" (ngSubmit)="saveGroup()">
        <mat-form-field class="form-group"  appearance="outline">
            <mat-label>Group Id</mat-label>
            <input [formControl] ="groupIdControl" matInput placeholder="Eg: G1" required>
            <mat-error>{{getGroupIdErrorMessage()}}</mat-error>
        </mat-form-field>
        <mat-form-field class="form-group"  appearance="outline">
            <mat-label>Group Name</mat-label>
            <input [formControl]="groupNameControl" matInput placeholder="Eg: Primary Science" required>
            <mat-error>{{getGroupNameErrorMessage()}}</mat-error>
        </mat-form-field>
        <button *ngIf = "doVisible()" class="action-button" type="button" mat-raised-button color="primary" (click)="addSubject()">Add Subject</button>
        <br>
        <div *ngFor="let subject of subjectList; let i = index;">
            <section class="subjects">
                    <mat-form-field class="form-group" appearance="outline">
                            <mat-label>Subject</mat-label>
                            <mat-select [formControl]="subjectSelection[i]"[(ngModel)]="subjectList[i].subject_id" name="subject">
                              <mat-option *ngFor="let subject of subjects" [value]="subject.subject_name">
                                {{subject.subject_name}}
                              </mat-option>
                            </mat-select>
                            <mat-error>{{getSubjectErrorMessage(i)}}</mat-error>
                          </mat-form-field>
            <mat-form-field class="form-group" appearance="outline">
                <mat-label>Class (Multiple)</mat-label>
                    <mat-select pannelClass="multi-select"  [formControl]="classSelection[i]" multiple>
                            <mat-select-trigger>
                              {{classSelection[i].value ? classSelection[i].value[0]: ''}}
                              <span *ngIf="classSelection[i].value?.length > 1" class="example-additional-selection">
                                (+{{classSelection[i].value.length - 1}} {{classSelection[i].value?.length === 2 ? 'other' : 'others'}})
                              </span>
                            </mat-select-trigger>
                            <mat-option *ngFor="let class of classes" [value]="class.class_name">{{class.class_name}}</mat-option>
                          </mat-select>
                          <mat-error>{{getClassErrorMessage(i)}}</mat-error>
            </mat-form-field>
            
            <button class="action-button" type="button" mat-raised-button color="basic" (click)="removeSubject(i)">Remove</button>
            <button *ngIf="i == subjectList.length-1" [disabled]="!doVisibleAddMore(i)" class="action-button" type="button" mat-raised-button color="primary" (click)="addSubject()">Add More</button>    
        </section>
        </div>
        <br>
        
        <button class="action-button" type="submit" mat-raised-button color="accent" [disabled]="submitDisabled()">Save</button>
        </form>
        <div class="alert alert-danger alert-dismissible fade-in" [hidden] = " error ? false : true">
          <button type="button" class="close" data-dismiss="alert" (click) = "dismissErrorAlert()">&times;</button>
          <strong>Error!</strong> {{error}}
        </div>
        
        <div class="alert alert-success alert-dismissible fade-in" [hidden] = " message ? false : true">
              <button type="button" class="close" data-dismiss="alert" (click) = "dismissMessageAlert()">&times;</button>
              <strong>Success!</strong> {{message}}
            </div>
    </mat-card-content>
    
</mat-card>

